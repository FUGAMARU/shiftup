# ShiftUP!

### サービス名について
| 物理名 | 論理名 |
| ---- | ---- |
| shiftup | ShiftUP!|

### エンドユーザー一覧
| 名称 | 役割 |
| ---- | ----|
| キャスト | 実際にオープンキャンパスの業務を遂行する学生(工科大生を含む) |
| 運営チーム | 新しいキャストの募集、各種連絡、シフトを組んだりと<br>オープンキャンパス業務の運営管理を行う |

### 現状のオープンキャンパスバイト出勤までのフロー
1. 運営チームが任意のタイミングで、向こう1ヶ月分のオープンキャンパス開催日程を提示する
2. キャストはそれぞれの開催日程に対して、出勤できるのかできないのかをアンケートで回答する
3. 運営チームが`2`の回答結果を元に、1日分の出勤者リストを作り、これをオープンキャンパス当日の1週間以内にキャストに送信する
4. キャストは`3`で送られてきたリストに自分が入っているか確認し、入っていればDiscordにて`◯◯ ◯◯ □月□日 確定`のように名前と日付を送信して自分の出勤を確定させる。
5. 運営チームはオープンキャンパス当日の朝に、役割ごと(受付、誘導など)のスケジュール表を作り、配布する。

### 実装したい機能
- シフト希望日程アンケート作成 / 回答(`1`と`2`に該当)
- シフト希望日程ごとの、出勤可能者のリストアップ
- `3`の出勤者リストに自分が含まれていればメール通知
- `3`の出勤者リストに自分が含まれていた場合の、出勤確定処理(通知)ボタン(`4`に該当)
- 出勤確定した人のリストアップ
- キャスト用のマイページがあり、PDFファイルを開くことなくそこから自分の1日のスケジュールが確認できる
- Discord APIにて自動でキャストを該当する役職のチャンネルに参加させる
- 運営チームが許可したGoogleアカウントのみサービスを利用できるようにする

### あったら良いかもしれない機能
- 月あたりの合計出勤回数
- 給与確認
  - 棒グラフなどでグラフィカルだと尚良し

### 作る必要のあるページ
- 共通
  - [ログイン(トップページにて表示切り替え)](https://shiftup.works/)
- キャストサイド
  - マイページ
    - 未回答の希望日程アンケート件数
    - 未確定の出勤件数
    - 次回出勤日
    - 今月の出勤回数
    - 今月の見込み給与
    - Discordリンク
    - その日のタイムテーブルへのリンク
  - [希望日程回答](https://shiftup.works/answer-survey)
  -  [出勤確定](https://shiftup.works/confirm-attendance)
- 運営チームサイド
  - [ユーザー管理](https://shiftup.works/management/manage-users)
  - [アンケート管理](https://shiftup.works/management/manage-surveys)
  - [認可ユーザー追加](https://shiftup.works/management/add-approved-user)
  - スケジュールテンプレート作成
  - [希望日程アンケート作成](https://shiftup.works/management/create-survey)
  - [アンケート集計・出勤可能者リストアップ・確定処理要求送信](https://shiftup.works/management/tally-survey)
  - [出勤確定リスト確認](https://shiftup.works/management/view-confirmed-attendances)
- 各種エラーページ
  - [認証エラー](https://shiftup.works/error/authentication-error)
  - [認可エラー](https://shiftup.works/error/invalid-user)
  - [権限エラー](https://shiftup.works/error/not-permitted)
  - [不明なエラー](https://shiftup.works/error/unknown-error)

### 開発メモ

#### 属性記述の優先順位目安(気づいたら修正)

1. クラス名
1. サイジング
1. スペーシング
1. 文字に関するもの
1. 表示に関するもの
1. ホバーなどその他表示に関するもの
1. イベントハンドラー(e.g. onClick())

#### セッションチェックについて
本来ログインしていないと開けないページを未ログイン状態で開けないようにするための処理

`hooks/useStatusCheck.tsx`に、バックエンドのAPIからログイン状態と役職を取ってきてRecoilにセットする処理を実装済み。  
ページ遷移の度にログインが有効かチェックする必要があるので、このカスタムフックは

1. ページ遷移の度に呼ばれる(読み込まれる)コンポーネント
2. Recoilを使えるコンポーネント

の条件を満たすコンポーネントから呼ぶ必要がある。  
なので`components/header/Header.tsx`に`useStatusCheck()`を記述した。